---
format: gfm
---

```{r}
#| include: false
library(tidyverse)
action <- yaml::read_yaml("action.yml")
action_name <- basename(getwd())
```

# `r action_name`

<!--
DO NOT EDIT THIS FILE MANUALLY!
This README was generated by running `make`
-->

`r action$description`

### Inputs available

```{r}
#| echo: false
lines <- map_chr(names(action$inputs), function(name) {
  input <- action$inputs[[name]]
  required <- ifelse(input$required %||% FALSE, "", "_(Optional)_ ")
  description <- gsub(".[ \n\r]*$", ".", input$description)
  default <- ifelse(!is.null(input$default), paste0(" Default: `", input$default, "`."), "")
  glue::glue("* `{name}`: {required}{description}{default}")
})
knitr::asis_output(paste0(lines, collapse = "\n"))
```

```{r}
#| echo: false
lines <- map_chr(names(action$outputs), function(name) {
  output <- action$outputs[[name]]
  glue::glue("* `{name}`: {output$description}")
})
if (length(lines) > 0) {
  knitr::asis_output(paste0("### Outputs", "", lines, collapse = "\n"))
}
```


## Usage

```yaml
name: Demo of `r action_name`

on:
  push:

jobs:
  demo:
    runs-on: ubuntu-latest
    
    steps:
    - name: Install Viash
      uses: viash-io/viash-actions/setup@add-working-dir-input

    - name: Check out repository
      uses: actions/checkout@v3

    - name: `r action$name`
      uses: viash-io/viash-actions/pro/build-nextflow-params@add-working-dir-input
      with:
        target: target/
        token: ${{ secrets.VIASH_PRO_TOKEN }}
        tools_version: main_build
```
