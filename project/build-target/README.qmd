---
format: gfm
---

```{r}
#| include: false
library(tidyverse)
action <- yaml::read_yaml("action.yml")
action_name <- basename(getwd())
```

# `r action_name`

<!--
DO NOT EDIT THIS FILE MANUALLY!
This README was generated by running `make`
-->

`r action$description`

### Inputs

```{r}
#| echo: false
lines <- map_chr(names(action$inputs), function(name) {
  input <- action$inputs[[name]]
  required <- ifelse (input$required %||% FALSE, "required", "optional")
  glue::glue("* `{name}`: - _{required}_. {input$description}")
})
knitr::asis_output(paste0(lines, collapse = "\n"))
```

### Outputs

```{r}
#| echo: false
lines <- map_chr(names(action$outputs), function(name) {
  output <- action$outputs[[name]]
  glue::glue("* `{name}`: {output$description}")
})
knitr::asis_output(paste0(lines, collapse = "\n"))
```

## Examples

```yaml
name: Demo of `r action_name`

on:
  push:
  pull_request:

jobs:
  demo:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: viash-io/viash-actions/setup@v6

      - name: `r action$name`
        id: build_target
        uses: viash-io/viash-actions/build-target@v6

      - name: Check output
        run: |
          # view target directory
          ls -l target/

          # do something with the output
          echo "${{steps.build_target.outputs.docker_component_matrix}}"
          echo "${{steps.build_target.outputs.component_matrix}}"
```
